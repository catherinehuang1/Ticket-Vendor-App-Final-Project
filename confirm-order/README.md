
## Confirm order service

Author: Seth Franklin (GitHub ID: SethFranklin)

This is the confirm-order service. It kind of acts like a query service, where it pieces together data generated by other services to make put it all into an "order". Users can call it's API endpoint to get all of the information about their order.

This service communicates with other services via the event bus, by listening to and recieving events. It listens to the UserConfirmed, SeatsSelected, CardDenied, CardAccepted, TimerExpired, and CardCreated events, and emits the OrderConfirmed event.

## API Endpoint

Here is the specification for the API endpoint to get order confirmation information.

ENDPOINT: Confirm order

URL: /api/v1/orders/confirm

Method: GET

Request body:

Request Data Constraints:

    {
        "user_id": "string",
    }

Request Data Example:

    {
        "user_id": "d5b7ce",
    }

Response:

200 OK: If the user id is valid, it returns the order confirmation info. Response Data Constraints:

    {
        "user_id": "string",
        "full_name": "string",
        "email_address": "string",
        "order_status": "accepted" | "denied" | "processing_card" | "timed_out",
        "seats": [
            {
                "row": "number",
                "column": "number",
            },...
        ] | undefined,
        "card_info": {
            "card_number": "string",
            "billing_address": "string",
            "expiration_date": "string",
            "cvv": "string"
        } | undefined
    }

Response Data Example:

    {
        "user_id": "d5b7ce",
        "full_name": "Seth Franklin",
        "email_address": "sjfranklin@umass.edu",
        "order_status": "accepted",
        "seats": [
            {
                "row": 5,
                "column": 3,
            },
            {
                "row": 5,
                "column": 4,
            },
            {
                "row": 5,
                "column": 5,
            }
        ],
        "card_info": {
            "card_number": "1234567890123456",
            "billing_address": "181 Presidents Drive, Amherst MA, 01003",
            "expiration_date": "01/01",
            "cvv": "123"
        }
    }

400 BAD REQUEST: If request data is incomplete or the user id isnâ€™t valid

500 INTERNAL SERVER ERROR: If there is an exception or other error condition that is rare or shouldn't occur

## How to run this service

If you want to run the service, you can do it on your machine using npm. First run this to install the dependencies:

    npm install

Then run this to start the service:

    npm start

Alternatively, you can use docker compose to run this service and all of the services it depends on using:

    docker-compose up confirm-order